<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S√°zky NADƒöJE</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; text-align: center; margin: 0; padding: 20px; }
        .container { background: white; max-width: 500px; margin: auto; padding: 20px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        
        /* MEGA 3D VLAJKY */
        .flag-wrapper { perspective: 1000px; display: inline-block; margin: 10px; filter: drop-shadow(0 6px 12px rgba(0,0,0,0.3)); }
        .flag-img { width: 80px; height: auto; border-radius: 4px; animation: megaWave 3s ease-in-out infinite; transform-origin: left center; }
        @keyframes megaWave {
            0%, 100% { transform: rotateX(0deg) rotateY(0deg) skewY(0deg); }
            25% { transform: rotateX(10deg) rotateY(15deg) skewY(2deg); }
            50% { transform: rotateX(-5deg) rotateY(25deg) skewY(-3deg) scale(1.08); }
            75% { transform: rotateX(8deg) rotateY(15deg) skewY(1deg); }
        }

        .match-box { display: flex; align-items: center; justify-content: space-around; margin: 20px 0; font-weight: bold; font-size: 1.2em; }
        .bank-info { background: #27ae60; color: white; padding: 15px; border-radius: 10px; font-size: 1.4em; margin-bottom: 20px; }
        .last-result { background: #ebf5fb; padding: 15px; border-radius: 10px; margin-top: 20px; font-size: 0.9em; border: 1px dashed #3498db; }
        input, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 10px; border: 1px solid #ddd; box-sizing: border-box; }
        button { background: #3498db; color: white; border: none; font-weight: bold; cursor: pointer; }
        .qr-box img { max-width: 200px; margin-top: 15px; border: 5px solid white; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <div class="container">
        <h1>S√ÅZKY NADƒöJE üèÜ</h1>
        
        <div id="bank" class="bank-info">Bank: 0 Kƒç</div>

        <div class="match-box">
            <div>
                <div class="flag-wrapper"><img id="flagD" class="flag-img" src=""></div>
                <div id="t√ΩmD">---</div>
            </div>
            <div style="font-size: 2em;">VS</div>
            <div>
                <div class="flag-wrapper"><img id="flagH" class="flag-img" src=""></div>
                <div id="t√ΩmH">---</div>
            </div>
        </div>

        <div id="status" style="font-weight: bold; color: #e74c3c; margin-bottom: 10px;"></div>

        <div id="sazkaForm">
            <input type="text" id="jmeno" placeholder="Tv√© jm√©no">
            <input type="text" id="skore" placeholder="Tip sk√≥re (nap≈ô. 3:2)">
            <input type="text" id="strelec" placeholder="St≈ôelec g√≥lu">
            <button onclick="odeslatSazku()">ODESLAT TIP (20 Kƒç)</button>
        </div>

        <div class="qr-box">
            <p>Zapla≈• zde:</p>
            <img id="qrKod" src="https://api.paylibo.com/paylibo/generator/czech/image?accountNumber=222333444&bankCode=0800&amount=20&currency=CZK&message=Sazka" alt="QR Platba">
        </div>

        <div class="last-result">
            <strong>Minul√© kolo:</strong><br>
            <span id="posledniZapas">Naƒç√≠t√°n√≠...</span><br>
            <span id="posledniStrelci" style="font-style: italic; font-size: 0.8em;"></span>
        </div>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyC-NCdmsgA42FxnopKm92m1y5gUGw_z_uE", authDomain: "nadeje-208bd.firebaseapp.com", databaseURL: "https://nadeje-208bd-default-rtdb.europe-west1.firebasedatabase.app", projectId: "nadeje-208bd", storageBucket: "nadeje-208bd.firebasestorage.app", messagingSenderId: "688478977789", appId: "1:688478977789:web:512d1520cf96c9e59cc894" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        db.ref('sazkyData').on('value', (snapshot) => {
            const data = snapshot.val();
            document.getElementById('t√ΩmD').innerText = data.domaci;
            document.getElementById('t√ΩmH').innerText = data.hoste;
            document.getElementById('flagD').src = `https://flagcdn.com/w160/${data.kodDomaci}.png`;
            document.getElementById('flagH').src = `https://flagcdn.com/w160/${data.kodHoste}.png`;
            document.getElementById('bank').innerText = `Bank: ${data.prevedenyBank || 0} Kƒç`;
            
            if(data.posledniVysledek) {
                document.getElementById('posledniZapas').innerText = `${data.posledniVysledek.tymy} - ${data.posledniVysledek.skore}`;
                document.getElementById('posledniStrelci').innerText = `St≈ôelci: ${data.posledniVysledek.strelci || '≈æ√°dn√≠'}`;
            }

            const deadline = new Date(data.deadline).getTime();
            if (Date.now() > deadline) {
                document.getElementById('sazkaForm').style.display = 'none';
                document.getElementById('status').innerText = "S√ÅZKY UZAV≈òENY";
            }
        });

        function odeslatSazku() {
            const jmeno = document.getElementById('jmeno').value;
            const skore = document.getElementById('skore').value;
            const strelec = document.getElementById('strelec').value;
            if(!jmeno || !skore) return alert("Vypl≈à jm√©no a tip!");
            db.ref('sazkyData/seznamSazek').push({ jmeno, skore, strelec, stav: "‚è≥ Vsadil" });
            alert("Tip odesl√°n! Nezapome≈à zaplatit 20 Kƒç.");
        }
    </script>
</body>
</html>
