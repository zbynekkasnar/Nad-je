<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - NADƒöJE</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .box { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 100%; max-width: 450px; }
        input, select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        .btn { width: 100%; padding: 15px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; color: white; }
        .btn-blue { background: #3498db; } .btn-green { background: #27ae60; }
    </style>
</head>
<body>
    <div class="box">
        <h2>üõ† Spr√°va S√°zek</h2>
        <label>Deadline:</label>
        <input type="datetime-local" id="set_deadline">
        
        <label>Dom√°c√≠:</label>
        <input list="staty" id="set_domaci" placeholder="Zaƒçni ps√°t st√°t..." oninput="syncCode('domaci')">
        
        <label>Host√©:</label>
        <input list="staty" id="set_hoste" placeholder="Zaƒçni ps√°t st√°t..." oninput="syncCode('hoste')">
        
        <input type="hidden" id="kod_domaci">
        <input type="hidden" id="kod_hoste">

        <datalist id="staty">
            <option data-code="cz" value="ƒåesko">
            <option data-code="sk" value="Slovensko">
            <option data-code="ca" value="Kanada">
            <option data-code="us" value="USA">
            <option data-code="de" value="Nƒõmecko">
            <option data-code="fi" value="Finsko">
            <option data-code="se" value="≈†v√©dsko">
            <option data-code="ch" value="≈†v√Ωcarsko">
        </datalist>

        <button class="btn btn-blue" onclick="nastavitKolo()">üöÄ VYPSAT KOLO</button>
        <button id="wsBtn" class="btn btn-green" style="margin-top:10px; display:none;" onclick="sdilet()">üì≤ POSLAT NA WHATSAPP</button>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyC-NCdmsgA42FxnopKm92m1y5gUGw_z_uE", authDomain: "nadeje-208bd.firebaseapp.com", databaseURL: "https://nadeje-208bd-default-rtdb.europe-west1.firebasedatabase.app", projectId: "nadeje-208bd", storageBucket: "nadeje-208bd.firebasestorage.app", messagingSenderId: "688478977789", appId: "1:688478977789:web:512d1520cf96c9e59cc894" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function syncCode(typ) {
            const val = document.getElementById('set_'+typ).value;
            const opts = document.getElementById('staty').options;
            for(let o of opts) { if(o.value === val) document.getElementById('kod_'+typ).value = o.getAttribute('data-code'); }
        }

        function nastavitKolo() {
            const d=document.getElementById('set_domaci').value, h=document.getElementById('set_hoste').value, kd=document.getElementById('kod_domaci').value, kh=document.getElementById('kod_hoste').value, dl=document.getElementById('set_deadline').value;
            db.ref('sazkyData').update({ domaci:d, hoste:h, kodDomaci:kd, kodHoste:kh, deadline:dl, seznamSazek:null }).then(() => {
                alert("Vyps√°no!"); document.getElementById('wsBtn').style.display='block';
            });
        }

        function sdilet() {
            const d=document.getElementById('set_domaci').value, h=document.getElementById('set_hoste').value;
            const text = `‚öΩ *NOV√ù Z√ÅPAS!* %0Aüö© *${d} vs. ${h}* %0Aüëâ Tipuj zde: [ODKAZ]`;
            window.open(`https://wa.me/?text=${text}`, '_blank');
        }
    </script>
</body>
</html>
