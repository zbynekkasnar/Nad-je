<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STATISTIKY - KANCEL√Å≈ò NADƒöJE</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        :root { --neon: #00f2ff; --dark: #0f172a; --gold: #ffd700; }
        body { background: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 15px; text-align: center; }
        
        .stats-container { max-width: 600px; margin: 0 auto; }
        .stat-card { 
            background: rgba(255,255,255,0.05); border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 25px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        h2 { color: var(--neon); text-transform: uppercase; font-size: 1.2em; margin-bottom: 15px; letter-spacing: 2px; }
        
        .stat-row { 
            display: flex; justify-content: space-between; padding: 10px; 
            border-bottom: 1px solid rgba(255,255,255,0.05); 
        }
        .stat-row:last-child { border: none; }
        .rank { color: var(--neon); font-weight: bold; width: 30px; }
        .name { flex-grow: 1; text-align: left; padding-left: 10px; }
        .value { font-weight: bold; color: var(--gold); }

        .header-logo { max-width: 200px; margin-bottom: 20px; filter: drop-shadow(0 0 10px var(--neon)); opacity: 0.7; }
        .btn-back { display: inline-block; margin-top: 20px; color: white; text-decoration: none; font-size: 0.9em; opacity: 0.5; }
    </style>
</head>
<body>

    <a href="index.html"><img src="IMG_8429.png" alt="Logo" class="header-logo"></a>
    
    <div class="stats-container">
        <div class="stat-card">
            <h2>üí∞ BANKOVN√ç LUPIƒåI</h2>
            <div id="leaderboard-money">Naƒç√≠t√°m...</div>
        </div>

        <div class="stat-card">
            <h2>üéØ MIST≈òI V√ùSLEDK≈Æ</h2>
            <div id="leaderboard-score">Naƒç√≠t√°m...</div>
        </div>

        <div class="stat-card">
            <h2>üèí KR√ÅLOV√â ST≈òELC≈Æ</h2>
            <div id="leaderboard-players">Naƒç√≠t√°m...</div>
        </div>
    </div>

    <a href="index.html" class="btn-back">‚Üê ZPƒöT NA S√ÅZKY</a>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyC-NCdmsgA42FxnopKm92m1y5gUGw_z_uE", authDomain: "nadeje-208bd.firebaseapp.com", databaseURL: "https://nadeje-208bd-default-rtdb.europe-west1.firebasedatabase.app", projectId: "nadeje-208bd", storageBucket: "nadeje-208bd.firebasestorage.app", messagingSenderId: "688478977789", appId: "1:688478977789:web:512d1520cf96c9e59cc894" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        db.ref('sazkyData/stats').on('value', snap => {
            const stats = snap.val() || {};
            
            // P≈ôevedeme objekty na pole a se≈ôad√≠me
            renderTable('leaderboard-money', stats, 'vyhry', ' Kƒç');
            renderTable('leaderboard-score', stats, 'trefeneSkore', 'x');
            renderTable('leaderboard-players', stats, 'trefeniStrelci', 'x');
        });

        function renderTable(elementId, data, property, unit) {
            const container = document.getElementById(elementId);
            container.innerHTML = "";
            
            const sorted = Object.entries(data)
                .map(([name, val]) => ({ name, value: val[property] || 0 }))
                .filter(item => item.value > 0)
                .sort((a, b) => b.value - a.value);

            if (sorted.length === 0) {
                container.innerHTML = "<small style='opacity:0.3'>Zat√≠m ≈æ√°dn√© z√°znamy</small>";
                return;
            }

            sorted.forEach((item, index) => {
                const row = `
                    <div class="stat-row">
                        <span class="rank">${index + 1}.</span>
                        <span class="name">${item.name}</span>
                        <span class="value">${item.value}${unit}</span>
                    </div>`;
                container.innerHTML += row;
            });
        }
    </script>
</body>
</html>
